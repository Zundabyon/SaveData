<div class="min-h-screen text-slate-100 flex">
  <!-- Â∑¶ÔºöÂπ¥Ë°®Êú¨‰Ωì -->
  <main class="flex-1 overflow-y-scroll px-6 py-12 scroll-smooth">

    <!-- „Çø„Ç§„Éà„É´ -->
    <header class="mb-16 text-center">
      <h1 class="text-3xl md:text-4xl font-bold tracking-widest">
        ‚îÄ‚îÄ ÂÜíÈô∫„ÅÆË®òÈå≤ ‚îÄ‚îÄ
      </h1>
      <p class="mt-2 text-sm text-slate-400">
        „Çª„Éº„Éñ„Éá„Éº„Çø„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ
      </p>
    </header>

    <!-- „Çø„Ç§„É†„É©„Ç§„É≥ -->
    <div class="relative max-w-3xl mx-auto timeline-scan">

      <!-- Á∏¶Á∑ö -->
      <div class="absolute left-4 top-0 h-full w-px bg-slate-700"></div>

      <% @games.each do |game| %>
        <% next if game.played_year.blank? || game.title.blank? %>

        <div
          id="year-<%= game.played_year %>"
          class="relative pl-12 pb-12 scroll-mt-24"
        >

          <!-- Âπ¥„Éû„Éº„Ç´„Éº -->
          <div class="absolute left-0 top-1 w-8 h-8 rounded-full
                      bg-slate-900 border border-slate-500
                      flex items-center justify-center
                      text-xs font-bold
                      year-marker">
            <%= game.played_year %>
          </div>

          <!-- „Ç´„Éº„Éâ -->
          <div
            class="bg-slate-800/60 backdrop-blur
                   border border-slate-700
                   rounded-xl p-5 shadow-lg
                   cursor-pointer hover:border-slate-500 transition"
            onclick="openModal(
              '<%= j game.title %>',
              '<%= j [game.hardware, game.genre, (game.played_age && "#{game.played_age}Ê≠≥")].compact.join(" / ") %>',
              '<%= j game.memo %>'
            )"
          >

            <h2 class="text-lg font-semibold tracking-wide">
              <%= game.title %>
            </h2>

            <div class="mt-2 flex flex-wrap gap-3 text-xs text-slate-400">
              <% if game.hardware.present? %>
                <span>üéÆ <%= game.hardware %></span>
              <% end %>
              <% if game.genre.present? %>
                <span>‚öîÔ∏è <%= game.genre %></span>
              <% end %>
              <% if game.played_age.present? %>
                <span>üï∞ <%= game.played_age %>Ê≠≥</span>
              <% end %>
            </div>

            <div class="mt-4 grid grid-cols-3 gap-3 text-xs">
              <% if game.fun.present? %>
                <div>
                  <p class="text-slate-400">Ê•Ω„Åó„Åï</p>
                  <p class="font-bold"><%= "‚òÖ" * game.fun %></p>
                </div>
              <% end %>
              <% if game.difficulty.present? %>
                <div>
                  <p class="text-slate-400">Èõ£ÊòìÂ∫¶</p>
                  <p class="font-bold"><%= "‚òÖ" * game.difficulty %></p>
                </div>
              <% end %>
              <% if game.ended_year.present? %>
                <div>
                  <p class="text-slate-400">„ÇØ„É™„Ç¢Âπ¥</p>
                  <p class="font-bold"><%= game.ended_year %></p>
                </div>
              <% end %>
            </div>

            <% if game.memo.present? %>
              <p class="mt-4 text-sm text-slate-300 leading-relaxed line-clamp-2">
                „Äå<%= game.memo %>„Äç
              </p>
            <% end %>

          </div>
        </div>
      <% end %>

      <% if @games.empty? %>
        <p class="text-center text-slate-400">
          „Åæ„Å†Ë®òÈå≤„ÅØ„Å™„ÅÑ„Çà„ÅÜ„Å†‚Ä¶‚Ä¶
        </p>
      <% end %>

    </div>
  </main>

  <!-- Âè≥ÔºöÂπ¥Âè∑„Éä„ÉìÔºàÂõ∫ÂÆöÔºâ -->
  <aside class="hidden md:block w-32 border-l border-slate-800 bg-black/40">
    <ul class="sticky top-0 p-4 space-y-4 text-center">
      <% @games.each do |game| %>
        <% next if game.played_year.blank? %>
        <li>
          <a
            href="#year-<%= game.played_year %>"
            class="text-slate-400 text-sm tracking-wider
                   hover:text-slate-100 transition"
          >
            <%= game.played_year %>
          </a>
        </li>
      <% end %>
    </ul>
  </aside>

</div>

<!-- „É¢„Éº„ÉÄ„É´ -->
<div
  id="game-modal"
  class="fixed inset-0 bg-black/70 backdrop-blur-sm
         hidden items-center justify-center z-50"
>
  <div class="bg-slate-900 border border-slate-700
              rounded-xl max-w-lg w-full p-6 relative
              ff7-modal">

    <button
      onclick="closeModal()"
      class="absolute top-3 right-3 text-slate-400 hover:text-white"
    >
      ‚úï
    </button>

    <h2 id="modal-title" class="text-xl font-bold mb-2"></h2>
    <p id="modal-meta" class="text-sm text-slate-400 mb-4"></p>
    <p id="modal-memo" class="text-slate-300 leading-relaxed"></p>
  </div>
</div>

<script>
  function openModal(title, meta, memo) {
    document.getElementById("modal-title").innerText = title
    document.getElementById("modal-meta").innerText = meta
    document.getElementById("modal-memo").innerText = memo
    const modal = document.getElementById("game-modal")
    modal.classList.remove("hidden")
    modal.classList.add("flex")
  }

  function closeModal() {
    const modal = document.getElementById("game-modal")
    modal.classList.add("hidden")
    modal.classList.remove("flex")
  }
</script>
